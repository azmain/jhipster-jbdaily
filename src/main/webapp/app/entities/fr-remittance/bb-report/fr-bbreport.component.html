<div>
  <form class="row g-3" [formGroup]="frRemittanceSearchForm">
    <div class="col-md-3">
      <label for="inputEmail4" class="form-label">Transaction Type</label>
      <p-dropdown
        [options]="transactionTypeValues | keyvalue"
        formControlName="transactionType"
        optionLabel="value"
        optionValue="value"
        [filter]="true"
        filterBy="name"
        [showClear]="true"
        [style]="{ width: '100%' }"
        placeholder="Select a transaction type"
      >
      </p-dropdown>
    </div>
    <div class="col-md-3">
      <label for="inputPassword4" class="form-label">Money Exchange</label>
      <p-dropdown
        [options]="moneyExchangesSharedCollection"
        id="field_moneyExchange"
        data-cy="moneyExchange"
        name="moneyExchange"
        formControlName="moneyExchangeId"
        optionLabel="name"
        optionValue="id"
        [filter]="true"
        filterBy="name"
        [showClear]="true"
        [style]="{ width: '100%' }"
        placeholder="Select a moneyExchange"
      >
      </p-dropdown>
    </div>

    <div class="col-md-3">
      <label class="form-label" for="field_paymentDate">From Paid Date</label>
      <p-calendar
        name="paymentDate"
        id="field_paymentDate"
        formControlName="paymentDateFrom"
        dateFormat="dd/mm/yy"
        [style]="{ width: '100%' }"
        [showButtonBar]="true"
        [showIcon]="true"
      ></p-calendar>
    </div>
    <div class="col-md-3">
      <label class="form-label" for="field_paymentDate">To Paid Date</label>
      <p-calendar
        name="paymentDate"
        id="field_paymentDate"
        formControlName="paymentDateTo"
        dateFormat="dd/mm/yy"
        [style]="{ width: '100%' }"
        [showButtonBar]="true"
        [showIcon]="true"
      ></p-calendar>
    </div>

    <div class="col-md-3">
      <label class="form-label" for="field_incPaymentDate">From Incentive Paid Date</label>
      <p-calendar
        name="incPaymentDate"
        id="field_incPaymentDate"
        formControlName="incPaymentDateFrom"
        dateFormat="dd/mm/yy"
        [style]="{ width: '100%' }"
        [showButtonBar]="true"
        [showIcon]="true"
      ></p-calendar>
    </div>
    <div class="col-md-3">
      <label class="form-label" for="field_incPaymentDate">To Incentive Paid Date</label>
      <p-calendar
        name="incPaymentDate"
        id="field_incPaymentDate"
        formControlName="incPaymentDateTo"
        dateFormat="dd/mm/yy"
        [style]="{ width: '100%' }"
        [showButtonBar]="true"
        [showIcon]="true"
      ></p-calendar>
    </div>

    <div class="col-md-3">
      <label for="inputPassword4" class="form-label">Receiver Name</label>
      <input type="text" pInputText [style]="{ width: '100%' }" formControlName="recvName" />
    </div>

    <div class="col-12">
      <p-button label="Search" icon="pi pi-search" iconPos="right" (click)="onSearch()" [disabled]="isLoading"></p-button>
    </div>
  </form>
</div>

<br />
<br />

<p-table
  #pTableId
  [value]="frRemittancesDataTable"
  styleClass="p-datatable-gridlines p-datatable-sm"
  [exportHeader]="'customExportHeader'"
  [tableStyle]="{ 'min-width': '50rem' }"
  [paginator]="true"
  [rows]="20"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
  [rowsPerPageOptions]="[20, 40, 60]"
>
  <ng-template pTemplate="caption">
    <div class="flex align-items-right" style="text-align: right">
      <button
        type="button"
        pButton
        pRipple
        icon="pi pi-file-pdf"
        (click)="export()"
        class="p-button-warning mr-2"
        pTooltip="PDF"
        tooltipPosition="bottom"
      ></button>
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th colspan="22" style="text-align: center">Satement of 2% Cash Incentive paid against inward Foreign Remittance For</th>
    </tr>
    <tr>
      <th colspan="22" style="text-align: center">Janata Bank Limited</th>
    </tr>
    <tr>
      <th colspan="22" style="text-align: center">Pulhat Branch</th>
    </tr>
    <tr>
      <th></th>
      <th colspan="7" style="text-align: center">Cash Incentive Receiver's Information</th>
      <th colspan="4" style="text-align: center">Remitter's Information</th>
      <th colspan="6" style="text-align: center">Remittance Information</th>
      <th colspan="3" style="text-align: center">Cash Incentive Information</th>
      <th>Remark</th>
    </tr>

    <tr>
      <th style="text-align: center">SN</th>

      <th style="text-align: center">Name*</th>
      <th style="text-align: center">Gender</th>
      <th style="text-align: center">Document Type</th>
      <th style="text-align: center">Document/Account</th>
      <th style="text-align: center">Name of Bank/MFS*</th>
      <th style="text-align: center">Type of Transaction*</th>
      <th style="text-align: center">Mobile*</th>

      <th style="text-align: center">Name*</th>
      <th style="text-align: center">Gender</th>
      <th style="text-align: center">Profesion</th>
      <th style="text-align: center">Country</th>

      <th style="text-align: center">Name of Bank/ Exchange Co*</th>
      <th style="text-align: center">Remittance Sending Date</th>
      <th style="text-align: center">Amount of Remittance in Foreign Currency</th>
      <th style="text-align: center">Exchange Rate</th>
      <th style="text-align: center">Amount (BDT)*</th>
      <th style="text-align: center">Amount Reimburse Date</th>

      <th style="text-align: center">Amount of Incentive (BDT)*</th>
      <th style="text-align: center">Payment Date of Incentive*</th>
      <th style="text-align: center">Incentive Amount Reimburse Date</th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-fr>
    <tr>
      <td style="text-align: center">{{ fr.id }}</td>

      <td style="text-align: center">{{ fr.recvName }}</td>
      <td style="text-align: center">{{ fr.recvGender }}</td>
      <td style="text-align: center">{{ fr.documentType }}</td>
      <td style="text-align: center">{{ fr.documentId }}</td>
      <td style="text-align: center">{{ fr.bankName }}</td>
      <td style="text-align: center">{{ fr.transactionType }}</td>
      <td style="text-align: center">{{ fr.recvMobileNo }}</td>

      <td style="text-align: center">{{ fr.remitersName }}</td>
      <td style="text-align: center">{{ fr.remitersGender }}</td>
      <td style="text-align: center">{{ fr.remitersProfession }}</td>
      <td style="text-align: center">{{ fr.remitersCountry }}</td>

      <td style="text-align: center">{{ fr.exchangeCompany }}</td>
      <td style="text-align: center">{{ fr.remiSendingDate }}</td>
      <td style="text-align: center">{{ fr.remiFrCurrency }}</td>
      <td style="text-align: center">{{ fr.exchangeRate }}</td>
      <td style="text-align: center">{{ fr.remitanceAmount }}</td>
      <td style="text-align: center">{{ fr.remiAmountReimDate }}</td>

      <td style="text-align: center">{{ fr.incentiveAmount }}</td>
      <td style="text-align: center">{{ fr.incPaymentDate }}</td>
      <td style="text-align: center">{{ fr.incAmountReimDate }}</td>

      <td></td>
    </tr>
  </ng-template>
  <!-- <ng-template pTemplate="footer">
      <tr>
        <td colspan="6" style="text-align: right">Totals</td>
        <td style="text-align: right">{{ frAmountTotal | currency: 'BDT' }}</td>
        <td style="text-align: right">{{ frIncAmountTotal | currency: 'BDT' }}</td>
      </tr>
    </ng-template> -->

  <ng-template pTemplate="summary">
    <div style="text-align: center">There are {{ frRemittancesDataTable.length }} remittances.</div>
  </ng-template>
</p-table>

<table #TABLE>
  <tr>
    <th colspan="22" style="text-align: center">Satement of 2% Cash Incentive paid against inward Foreign Remittance For</th>
  </tr>
  <tr>
    <th colspan="22" style="text-align: center">Janata Bank Limited</th>
  </tr>
  <tr>
    <th colspan="22" style="text-align: center">Pulhat Branch</th>
  </tr>
  <tr>
    <th></th>
    <th colspan="7" style="text-align: center">Cash Incentive Receiver's Information</th>
    <th colspan="4" style="text-align: center">Remitter's Information</th>
    <th colspan="6" style="text-align: center">Remittance Information</th>
    <th colspan="3" style="text-align: center">Cash Incentive Information</th>
    <th>Remark</th>
  </tr>
  <tr>
    <td style="text-align: center">SN</td>

    <td style="text-align: center">Name*</td>
    <td style="text-align: center">Gender</td>
    <td style="text-align: center">Document Type</td>
    <td style="text-align: center">Document/Account</td>
    <td style="text-align: center">Name of Bank/MFS*</td>
    <td style="text-align: center">Type of Transaction*</td>
    <td style="text-align: center">Mobile*</td>

    <td style="text-align: center">Name*</td>
    <td style="text-align: center">Gender</td>
    <td style="text-align: center">Profesion</td>
    <td style="text-align: center">Country</td>

    <td style="text-align: center">Name of Bank/ Exchange Co*</td>
    <td style="text-align: center">Remittance Sending Date</td>
    <td style="text-align: center">Amount of Remittance in Foreign Currency</td>
    <td style="text-align: center">Exchange Rate</td>
    <td style="text-align: center">Amount (BDT)*</td>
    <td style="text-align: center">Amount Reimburse Date</td>

    <td style="text-align: center">Amount of Incentive (BDT)*</td>
    <td style="text-align: center">Payment Date of Incentive*</td>
    <td style="text-align: center">Incentive Amount Reimburse Date</td>
    <td></td>
  </tr>

  <tr>
    <td>{{ '1' }}</td>
    <td>{{ '$fr_remitance->recv_name' }}</td>
    <td style="text-align: center">{{ '$fr_remitance->recv_legal_id' }}</td>
    <!-- @if($fr_remitance->transaction_type == 'A/C') -->
    <td style="text-align: center">{{ '$fr_remitance->pin' }}</td>
    <td style="text-align: center">Janata Bank Limited</td>
    <!-- @else -->
    <td></td>
    <td></td>
    <!-- @endif -->

    <td>{{ '$fr_remitance->remiters_name' }}</td>
    <td></td>
    <!-- @if($fr_remitance->money_exchange_id>0) -->
    <td style="text-align: center">{{ 'App\Models\Money_Exchange::find($fr_remitance->money_exchange_id)->name' }}</td>
    <!-- @else -->
    <td style="text-align: center">{{ '$fr_remitance->money_exchange_name' }}</td>
    <!-- @endif  -->
    <td>{{ '$fr_remitance->remi_sending_date' }}</td>
    <td>{{ '$fr_remitance->remi_fr_currency' }}</td>
    <td>{{ '$fr_remitance->exchange_rate' }}</td>
    <td style="text-align: right">{{ '$fr_remitance->amount' }}</td>
    <td style="text-align: center">{{ '$fr_remitance->transaction_type' }}</td>
    <td style="text-align: right">{{ '$fr_remitance->incentive_amount' }}</td>
    <td style="text-align: center">{{ 'incPaymentDate' }}</td>
  </tr>
  <!-- @endif -->
  <!-- @endforeach -->
  <tr>
    <!-- <td colspan="11" style="text-align: right;"><b>Total Amount (BDT)</b></td> -->
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td style="text-align: right">
      <b>{{ '$total_amount' }}</b>
    </td>
    <!-- <td style="text-align: right;"><b>Total Incentive Amount</b></td> -->
    <td></td>
    <td style="text-align: right">
      <b>{{ '$total_incentive_amount' }}</b>
    </td>
  </tr>
</table>
